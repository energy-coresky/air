#.jet core template

#.ware //////////////////////////////////////////////////////////////////////////////
#use(`<h4>WALK ALL WARES..</h4>` as header)
@use(.m_dev)
<div class="bg-wx bg-x" style="border-bottom:1px solid #4338ca;">
    <div class="fs16">Installed wares:</div>
</div>
<div class="bg-x" style="padding:10px">@php $bg_ware='' ~php
    @loop($e_installed)
        @inc(.single)@empty<h1>No wares</h1>
    ~loop
    <div>
    <input name="dir" size="50" value="{{$sky->d_vare_deleted}}" placeholder="Attach DEV ware from different directory">
    <input type="button" value="Add" onclick="sky.d.attach(this,0)">
    </div>
</div><br>
<div class="bg-wx bg-y" style="border-bottom:1px solid #4338ca;">
    <div class="fs16">Wares directory:</div>
    <div class="fs16" style="margin-left:30%">
        Create new ware: type
        <select>
            <option value="view">View</option>
            <option value="dev">Dev</option>
            <option value="prod">Prod</option>
            <option value="code">Code</option>
        </select><button>Create
        </button>
    </div>
</div>
<div class="bg-y" style="padding:10px;">@php $bg_ware='#e0e7ff' ~php
    @loop($e_dir)
        @inc(.single)@empty<h1>No wares</h1>
    ~loop
</div><br>
<div class="bg-wx bg-g" style="border-bottom:1px solid #4338ca;">
    <div class="fs16">Wares in the Internet for <span style="text-transform:uppercase">{{DIR_M}}</span>.SKY. application:</div>
</div>
<div class="" style="padding:10px;">
    <h1>Connecting ...</h1>
    @loop($_< 0)
        @inc(.single)
    ~loop
</div>
#.ware.single ------------------------------------------------------------------------------
<div class="ware" style="background:{{$bg_ware}}">
    <h2>{{$row->name}}<sup>{{$row->type}}</sup></h2>
    <div class="were-desc">
        @if($row->desc){{$row->desc}}@else
            This ware don't has desc.txt file
        ~if
    </div>
    <div style="width:150px;position:relative;top:50px">
    @if(!$bg_ware && 'dev' == $row->type)
        <button onclick="sky.d.attach('{{$row->name}}',1)">Uninstall</button>@else &nbsp;
    ~if
    </div>
</div>
#.single.m_dev ------------------------------------------------------------------------------
#use(.wares_memu as menu)
@loop(['overview', 'system', 'documentation'] as $name)
    <a class="inner-menu" href="_dev?{!$name!}"@active(!$sky->_1 && 'overview' == $name || $sky->_1 == $name)>{!ucfirst($name)!}</a>
~loop
#.m_dev.wares_memu ------------------------------------------------------------------------------
    <br><div class="other-task">Wares</div>
    <a class="inner-menu"@active('_dev?ware' == URI) href="_dev?ware">Browse ..</a>
    @loop($y_wares as $uri => $name)
        <a href="{{$uri}}?ware"@active($uri == URI)>{{$name}}</a>
    ~loop
#.wares_memu


#.system //////////////////////////////////////////////////////////////////////////////
#use(`<h4>ADJUST SYSTEM CONFIGURATION</h4>` as header)
@use(.m_dev)
#.system

#.documentation //////////////////////////////////////////////////////////////////////////////
#use(`<h4>THIS SECTION WILL MOVED TO THE EARTH</h4>` as header)
@use(.m_dev)
#.documentation

#.overview //////////////////////////////////////////////////////////////////////////////
#use(`<h4><u>DEV INSTANCE ONLY</u> CONFIGURATION AND INFORMATION</h4>` as header)
@use(.m_dev)
<div style="padding:10px 0 0 10px">
<fieldset><legend>DEV instance settings, {{$_SERVER['REMOTE_ADDR']}}</legend>
{! $form !}
</fieldset>
</div>
#.overview

#.view //////////////////////////////////////////////////////////////////////////////
#use(.menu)
#use(`{{count($list_views)}}` as views)
#use(`{!$top!}` as top_tpl)
#use(`{!$header!}` as header)
@if($php){!$php!}@else
    {!$layout!}{!$body!}
~if
#.view.menu ------------------------------------------------------------------------------
    <br><div class="other-task">Views</div>
    @loop($list_views as $v)
        <a href="_dev?view={{$sky->_2}}&nv={{$_}}"@active($nv == $_)>{{"$v[0] $v[1]"}}</a>
        @if($nv == $_)
        @loop($list_menu as $k => $v)
            <a href="_dev?view={{$sky->_2}}&nv={{$_}}&act={{$k}}"
                class="inner-menu"@active($k == ($sky->_6 ?: 0))>{!$v!}
            </a>
        ~loop
        ~if
    ~loop
    <br><div class="other-task">Variables</div>
    <a href="#">Show</a>
#.menu

#.layout //////////////////////////////////////////////////////////////////////////////
<!doctype html><html>
<head>@head<script>sky.a._0 = sky.a.div = '{{$sky->_0}}'; sky.a._1 = '{{$sky->_1}}'; sky.a.uri = '{{URI}}'</script>
</head>
<body>
<div id="main">
<div id="v-head">
    <div style="width:126px"><a href="{{PATH}}{{$sky->d_last_page ?: '_dev'}}">
        ▼ {{'ware'==@(explode('?', $sky->d_last_page))[1] ? 'Wares' : 'Tasks'}}</a>
    </div>
    <div style="width:144px">
    @loop($_ < 4)<a href="_x{{$_}}"@active("_x$_" == $y_tx)>{{$_ ? "X$_" : 'T0'}}</a>~loop
    </div>
    <div id="top-head" style="width:calc(100% - 380px)">@block(`` as header)</div>
    <div style="text-align:right; width:110px"><a href="#">Esc - Close @inc(__std.x)</a></div>
</div>

<div id="v-menu">
#if('_trace'!=:_0)
    <div class="other-task">Tasks</div>
    #if('view'==:_1 || 'min'==Plan::$ware)
        <a href="_dev">Show</a>
    #else
    @loop($y_tasks as $uri => $name)
        <a href="{{$uri}}"@active($sky->_0 == explode('?', $uri)[0])>{{$name}}</a>
        @if('_gate' == $uri)@block(`` as m_gate)
        @elseif('_lang?list' == $uri)@block(`` as m_lang)
        @elseif('_inst' == $uri)@block(`` as m_inst)
        @elseif('_glob' == explode('?', $uri)[0])@block(`` as m_glob)
        @elseif('_dev' == explode('?', $uri)[0])@block(`` as m_dev)
        ~if
    ~loop
    <a @href(var x=this;ajax('',function(r) { sky.d.drop_cache(r,x) },'_drop'))>Drop All Cache</a>
    #end
    @block(`` as menu)
#end
</div>

<div id="v-body">
    <div style="display:table-cell; width:inherit;" class="{{$y_page}}">@inc(*)</div>
    <div id="trace-h" style="display:none">{!$err_ajax ?? ''!}</div>
</div>

<div id="v-tail">
    <span style="width:40%" id="master">@block(`` as top_tpl)</span>
    <div style="width:35%" id="tpl-list">
        <form method="post" style="display:inline-block"><input type="hidden" name="t0">
        <a @href(sky.d.view({{preg_match("/^_x(\d)$/",URI,$m)?$m[1]:0}}))@active('_dev?view=' == substr(URI, 0, 10))>
            ▲ Views (<span>@block(views)?~block</span>)
        </a>&nbsp; &nbsp;
        <a href="#">
            ▲ SQLs (?)
        </a>&nbsp; &nbsp;
        <a href="#">▲ Classes (?)</a>
        <form>
    </div>
    <div style="text-align:right; width:25%"><b>AB.SKY {{SKY::version()['app'][3]}}</b></div>
</div>
#if('_trace'!=:_0)
    <style>#v-menu { width: 170px; } #v-body { width: calc(100vw - 170px); }</style>
#end
</div>
@tail</body></html>
#.layout
